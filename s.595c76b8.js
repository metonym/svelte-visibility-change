var app=function(){"use strict";function n(){}function t(n){return n()}function s(){return Object.create(null)}function a(n){n.forEach(t)}function e(n){return"function"==typeof n}function o(n,t){return n!=n?t==t:n!==t}function i(n,t){n.appendChild(t)}function p(n){n.parentNode.removeChild(n)}function c(n){return document.createElement(n)}function l(n){return document.createTextNode(n)}function r(){return l(" ")}function u(n,t,s){null==s?n.removeAttribute(t):n.getAttribute(t)!==s&&n.setAttribute(t,s)}let d;function h(n){d=n}function g(){if(!d)throw new Error("Function called outside component initialization");return d}function k(){const n=g();return(t,s)=>{const a=n.$$.callbacks[t];if(a){const e=function(n,t,s=!1){const a=document.createEvent("CustomEvent");return a.initCustomEvent(n,s,!1,t),a}(t,s);a.slice().forEach((t=>{t.call(n,e)}))}}}const f=[],b=[],v=[],m=[],y=Promise.resolve();let $=!1;function x(n){v.push(n)}let T=!1;const w=new Set;function L(){if(!T){T=!0;do{for(let n=0;n<f.length;n+=1){const t=f[n];h(t),C(t.$$)}for(h(null),f.length=0;b.length;)b.pop()();for(let n=0;n<v.length;n+=1){const t=v[n];w.has(t)||(w.add(t),t())}v.length=0}while(f.length);for(;m.length;)m.pop()();$=!1,T=!1,w.clear()}}function C(n){if(null!==n.fragment){n.update(),a(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(x)}}const M=new Set;function H(n,t){n&&n.i&&(M.delete(n),n.i(t))}function _(n,t,s,a){if(n&&n.o){if(M.has(n))return;M.add(n),undefined.c.push((()=>{M.delete(n),a&&(s&&n.d(1),a())})),n.o(t)}}function E(n){n&&n.c()}function A(n,s,o,i){const{fragment:p,on_mount:c,on_destroy:l,after_update:r}=n.$$;p&&p.m(s,o),i||x((()=>{const s=c.map(t).filter(e);l?l.push(...s):a(s),n.$$.on_mount=[]})),r.forEach(x)}function P(n,t){const s=n.$$;null!==s.fragment&&(a(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function j(n,t){-1===n.$$.dirty[0]&&(f.push(n),$||($=!0,y.then(L)),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function S(t,e,o,i,c,l,r,u=[-1]){const g=d;h(t);const k=t.$$={fragment:null,ctx:null,props:l,update:n,not_equal:c,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(g?g.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:e.target||g.$$.root};r&&r(k.root);let f=!1;if(k.ctx=o?o(t,e.props||{},((n,s,...a)=>{const e=a.length?a[0]:s;return k.ctx&&c(k.ctx[n],k.ctx[n]=e)&&(!k.skip_bound&&k.bound[n]&&k.bound[n](e),f&&j(t,n)),s})):[],k.update(),f=!0,a(k.before_update),k.fragment=!!i&&i(k.ctx),e.target){if(e.hydrate){const n=function(n){return Array.from(n.childNodes)}(e.target);k.fragment&&k.fragment.l(n),n.forEach(p)}else k.fragment&&k.fragment.c();e.intro&&H(t.$$.fragment),A(t,e.target,e.anchor,e.customElement),L()}h(g)}class I{$destroy(){P(this,1),this.$destroy=n}$on(n,t){const s=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return s.push(t),()=>{const n=s.indexOf(t);-1!==n&&s.splice(n,1)}}$set(n){var t;this.$$set&&(t=n,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}function N(n,t,s){let{state:a}=t,{visible:e=!1}=t,{hidden:o=!1}=t;const i=k();function p(){s(0,a=document.visibilityState),i("change",{state:a,visible:e,hidden:o})}var c;return c=()=>(s(0,a=document.visibilityState),document.addEventListener("visibilitychange",p),()=>{document.removeEventListener("visibilitychange",p)}),g().$$.on_mount.push(c),n.$$set=n=>{"state"in n&&s(0,a=n.state),"visible"in n&&s(1,e=n.visible),"hidden"in n&&s(2,o=n.hidden)},n.$$.update=()=>{1&n.$$.dirty&&s(1,e="visible"===a),1&n.$$.dirty&&s(2,o="hidden"===a),2&n.$$.dirty&&e&&i("visible"),4&n.$$.dirty&&o&&i("hidden")},[a,e,o]}var V=class extends I{constructor(n){super(),S(this,n,N,null,o,{state:0,visible:1,hidden:2})}};function q(n){let t,s,a,e,o,d,h,g,k,f,v,y,$,x,T,w,L,C,M,j,S,I,N,q,D,U,F,G,O,B,z,W,Y,R,J,K,Q,X,Z,nn,tn,sn,an,en,on,pn,cn,ln,rn,un,dn,hn,gn,kn,fn,bn,vn,mn,yn,$n,xn,Tn,wn,Ln,Cn,Mn,Hn,_n,En,An,Pn,jn,Sn,In,Nn,Vn,qn,Dn,Un,Fn,Gn,On,Bn,zn,Wn,Yn,Rn,Jn,Kn,Qn,Xn,Zn,nt,tt,st,at,et,ot,it,pt=n[1].join(", ")+"";function ct(t){n[2](t)}let lt={};return void 0!==n[0]&&(lt.state=n[0]),ln=new V({props:lt}),b.push((()=>function(n,t,s){const a=n.$$.props[t];void 0!==a&&(n.$$.bound[a]=s,s(n.$$.ctx[a]))}(ln,"state",ct))),wn=new V({}),wn.$on("visible",n[3]),wn.$on("hidden",n[4]),{c(){t=c("main"),s=c("h1"),s.textContent="svelte-visibility-change",a=r(),e=c("p"),e.innerHTML='<a href="https://npmjs.com/package/svelte-visibility-change"><img src="https://img.shields.io/npm/v/svelte-visibility-change.svg?style=for-the-badge&amp;color=%23ff3e00" alt="NPM"/></a>',o=r(),d=c("blockquote"),d.innerHTML='<p>Detect browser page visibility changes using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API">Page Visibility API</a></p>',h=r(),g=c("p"),g.innerHTML='<a href="https://github.com/metonym/svelte-visibility-change">GitHub repo</a>',k=r(),f=c("p"),f.textContent="Use this utility component to declaratively listen to browser page visibility changes.",v=r(),y=c("p"),y.textContent="The visibility state of a page can either be “visible” or “hidden.”",$=r(),x=c("p"),x.innerHTML="<strong>Use cases</strong>",T=r(),w=c("ul"),w.innerHTML="<li>make a network request when the browser tab is focused</li> \n<li>play/pause audiot when the browser tab is focused or blurred</li> \n<li>pause expensive background computations when the tab is blurred</li>",L=r(),C=c("p"),C.innerHTML='Try it in the <a href="https://svelte.dev/repl/a4b8bdb782514baaa7fa1cb26313b303">Svelte REPL</a>.',M=r(),j=c("hr"),S=r(),I=c("p"),I.innerHTML="<strong>Table of Contents</strong>",N=c("ul"),N.innerHTML='<li><a href="#installation">Installation</a></li> \n<li><a href="#usage">Usage</a></li> \n<ul><li><a href="#basic">Basic</a></li> \n<li><a href="#visible-%2F-hidden">visible / hidden</a></li> \n<li><a href="#on%3Avisible-%2F-on%3Ahidden">on:visible / on:hidden</a></li> \n<li><a href="#on%3Achange">on:change</a></li> \n</ul><li><a href="#api">API</a></li> \n<ul><li><a href="#props">Props</a></li> \n<li><a href="#dispatched-events">Dispatched Events</a></li> \n</ul><li><a href="#typescript">TypeScript</a></li> \n<li><a href="#changelog">Changelog</a></li> \n<li><a href="#license">License</a></li>',q=r(),D=c("h2"),D.textContent="Installation",U=r(),F=c("p"),F.innerHTML="<strong>Yarn</strong>",G=r(),O=c("pre"),B=r(),z=c("p"),z.innerHTML="<strong>NPM</strong>",W=r(),Y=c("pre"),R=r(),J=c("p"),J.innerHTML="<strong>pnpm</strong>",K=r(),Q=c("pre"),X=r(),Z=c("h2"),Z.textContent="Usage",nn=r(),tn=c("h3"),tn.textContent="Basic",sn=r(),an=c("p"),an.innerHTML="Bind to the <code>state</code> prop to determine if the current tab is currently visible or hidden.",en=r(),on=c("p"),on.textContent="In this live demo, switch to a different tab in the same browser window. The page title should change from “visible” to “hidden.”",pn=r(),cn=c("div"),E(ln.$$.fragment),un=c("pre"),dn=r(),hn=c("h3"),hn.textContent="visible / hidden",gn=r(),kn=c("p"),kn.innerHTML="You can also bind to the boolean <code>visible</code> and <code>hidden</code> props.",fn=r(),bn=c("pre"),vn=r(),mn=c("h3"),mn.textContent="on:visible / on:hidden",yn=r(),$n=c("p"),$n.innerHTML="An alternative to binding to props is to listen to the <code>on:visible</code> and <code>on:hidden</code> dispatched events.",xn=r(),Tn=c("div"),E(wn.$$.fragment),Ln=r(),Cn=l(pt),Mn=c("pre"),Hn=r(),_n=c("h3"),_n.textContent="on:change",En=r(),An=c("p"),An.innerHTML='This component dispatches an <code>on:change</code> event whenever a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilitychange_event">visibilitychange</a> event occurs.',Pn=r(),jn=c("p"),jn.innerHTML="<strong>Note:</strong> unlike <code>on:visible</code>, this event only fires when the page visibility changes <em>after the component has mounted.</em>",Sn=r(),In=c("pre"),Nn=r(),Vn=c("h2"),Vn.textContent="API",qn=r(),Dn=c("h3"),Dn.textContent="Props",Un=r(),Fn=c("table"),Fn.innerHTML='<thead><tr><th style="text-align:left">Name</th> \n<th style="text-align:left">Type</th> \n<th style="text-align:left">Default value</th></tr></thead> \n<tbody><tr><td style="text-align:left">state</td> \n<td style="text-align:left"><code>&quot;visible&quot;</code> or <code>&quot;hidden&quot;</code></td> \n<td style="text-align:left"><code>undefined</code></td></tr> \n<tr><td style="text-align:left">visible</td> \n<td style="text-align:left"><code>boolean</code></td> \n<td style="text-align:left"><code>false</code></td></tr> \n<tr><td style="text-align:left">hidden</td> \n<td style="text-align:left"><code>boolean</code></td> \n<td style="text-align:left"><code>false</code></td></tr></tbody>',Gn=r(),On=c("h3"),On.textContent="Dispatched Events",Bn=r(),zn=c("ul"),zn.innerHTML="<li><strong>on:visible</strong>: fired if the page is visible</li> \n<li><strong>on:hidden</strong>: fired if the page visibility is hidden</li> \n<li><strong>on:change</strong>: fired when a page visibility event occurs, after the initial mount</li>",Wn=r(),Yn=c("h2"),Yn.textContent="TypeScript",Rn=r(),Jn=c("p"),Jn.textContent="Svelte version 3.31 or greater is required to use this component with TypeScript.",Kn=r(),Qn=c("p"),Qn.innerHTML='TypeScript definitions are located in the <a href="https://github.com/metonym/svelte-visibility-change/tree/master/types/">types folder</a>.',Xn=r(),Zn=c("h2"),Zn.textContent="Changelog",nt=r(),tt=c("p"),tt.innerHTML='<a href="https://github.com/metonym/svelte-visibility-change/tree/master/CHANGELOG.md">CHANGELOG.md</a>',st=r(),at=c("h2"),at.textContent="License",et=r(),ot=c("p"),ot.innerHTML='<a href="https://github.com/metonym/svelte-visibility-change/tree/master/LICENSE">MIT</a>',u(s,"id","svelte-visibility-change"),u(D,"id","installation"),u(O,"class","language-bash"),u(Y,"class","language-bash"),u(Q,"class","language-bash"),u(Z,"id","usage"),u(tn,"id","basic"),u(cn,"class","code-fence"),u(un,"class","language-svelte"),u(un,"data-svelte",""),u(hn,"id","visible-%2F-hidden"),u(bn,"class","language-svelte"),u(mn,"id","on%3Avisible-%2F-on%3Ahidden"),u(Tn,"class","code-fence"),u(Mn,"class","language-svelte"),u(Mn,"data-svelte",""),u(_n,"id","on%3Achange"),u(In,"class","language-svelte"),u(Vn,"id","api"),u(Dn,"id","props"),u(On,"id","dispatched-events"),u(Yn,"id","typescript"),u(Zn,"id","changelog"),u(at,"id","license"),u(t,"class","markdown-body")},m(n,p){!function(n,t,s){n.insertBefore(t,s||null)}(n,t,p),i(t,s),i(t,a),i(t,e),i(t,o),i(t,d),i(t,h),i(t,g),i(t,k),i(t,f),i(t,v),i(t,y),i(t,$),i(t,x),i(t,T),i(t,w),i(t,L),i(t,C),i(t,M),i(t,j),i(t,S),i(t,I),i(t,N),i(t,q),i(t,D),i(t,U),i(t,F),i(t,G),i(t,O),O.innerHTML='<span class="token function">yarn</span> <span class="token function">add</span> -D svelte-visibility-change\n',i(t,B),i(t,z),i(t,W),i(t,Y),Y.innerHTML='<span class="token function">npm</span> i -D svelte-visibility-change\n',i(t,R),i(t,J),i(t,K),i(t,Q),Q.innerHTML='<span class="token function">pnpm</span> i -D svelte-visibility-change\n',i(t,X),i(t,Z),i(t,nn),i(t,tn),i(t,sn),i(t,an),i(t,en),i(t,on),i(t,pn),i(t,cn),A(ln,cn,null),i(t,un),un.innerHTML='<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">import</span> VisibilityChange <span class="token keyword">from</span> <span class="token string">"svelte-visibility-change"</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">let</span> state<span class="token punctuation">;</span> <span class="token comment">/** "visible" | "hidden" */</span>\n\n  $<span class="token operator">:</span> document<span class="token punctuation">.</span>title <span class="token operator">=</span> state<span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VisibilityChange</span> <span class="token attr-name"><span class="token namespace">bind:</span>state</span> <span class="token punctuation">/></span></span>\n',i(t,dn),i(t,hn),i(t,gn),i(t,kn),i(t,fn),i(t,bn),bn.innerHTML='<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">import</span> VisibilityChange <span class="token keyword">from</span> <span class="token string">"svelte-visibility-change"</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">let</span> visible<span class="token punctuation">;</span> <span class="token comment">/** boolean */</span>\n  <span class="token keyword">let</span> hidden<span class="token punctuation">;</span> <span class="token comment">/** boolean */</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VisibilityChange</span> <span class="token attr-name"><span class="token namespace">bind:</span>visible</span> <span class="token attr-name"><span class="token namespace">bind:</span>hidden</span> <span class="token punctuation">/></span></span>\n',i(t,vn),i(t,mn),i(t,yn),i(t,$n),i(t,xn),i(t,Tn),A(wn,Tn,null),i(Tn,Ln),i(Tn,Cn),i(t,Mn),Mn.innerHTML='<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n  <span class="token keyword">import</span> VisibilityChange <span class="token keyword">from</span> <span class="token string">"svelte-visibility-change"</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">let</span> events <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VisibilityChange</span>\n  <span class="token attr-name"><span class="token namespace">on:</span>visible=</span><span class="token language-javascript"><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>events <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>events<span class="token punctuation">,</span> <span class="token string">"on:visible"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n  <span class="token attr-name"><span class="token namespace">on:</span>hidden=</span><span class="token language-javascript"><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>events <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>events<span class="token punctuation">,</span> <span class="token string">"on:hidden"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n<span class="token punctuation">/></span></span>\n\n<span class="token language-javascript"><span class="token punctuation">{</span>events<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n',i(t,Hn),i(t,_n),i(t,En),i(t,An),i(t,Pn),i(t,jn),i(t,Sn),i(t,In),In.innerHTML='<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VisibilityChange</span>\n  <span class="token attr-name"><span class="token namespace">on:</span>change=</span><span class="token language-javascript"><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> detail <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>detail<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "visible" | "hidden"</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>detail<span class="token punctuation">.</span>visible<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// boolean</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>detail<span class="token punctuation">.</span>hidden<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// boolean</span>\n  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n<span class="token punctuation">/></span></span>\n',i(t,Nn),i(t,Vn),i(t,qn),i(t,Dn),i(t,Un),i(t,Fn),i(t,Gn),i(t,On),i(t,Bn),i(t,zn),i(t,Wn),i(t,Yn),i(t,Rn),i(t,Jn),i(t,Kn),i(t,Qn),i(t,Xn),i(t,Zn),i(t,nt),i(t,tt),i(t,st),i(t,at),i(t,et),i(t,ot),it=!0},p(n,[t]){const s={};var a;!rn&&1&t&&(rn=!0,s.state=n[0],a=()=>rn=!1,m.push(a)),ln.$set(s),(!it||2&t)&&pt!==(pt=n[1].join(", ")+"")&&function(n,t){t=""+t,n.wholeText!==t&&(n.data=t)}(Cn,pt)},i(n){it||(H(ln.$$.fragment,n),H(wn.$$.fragment,n),it=!0)},o(n){_(ln.$$.fragment,n),_(wn.$$.fragment,n),it=!1},d(n){n&&p(t),P(ln),P(wn)}}}function D(n,t,s){let a,e=[];return n.$$.update=()=>{1&n.$$.dirty&&(document.title=a)},[a,e,function(n){a=n,s(0,a)},()=>s(1,e=[...e,"on:visible"]),()=>s(1,e=[...e,"on:hidden"])]}return new class extends I{constructor(n){super(),S(this,n,D,q,o,{})}}({target:document.body})}();
